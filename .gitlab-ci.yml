stages:
  - build
  - deploy

build-project:
  image: maven:latest
  stage: build
  script:
    - echo "Maven package start"
    - mvn install -DskipTests
    - mkdir app
    - cp /root/.m2/repository/com/jarema/lukasz/Meeting-Application/0.0.1-SNAPSHOT/Meeting-Application-0.0.1-SNAPSHOT.jar app/
    - ls -l app/
    - ls -l /root/.m2/repository/com/jarema/lukasz/Meeting-Application/0.0.1-SNAPSHOT/
    - echo "Maven package done"

deploy-to-ftp:
  image: alpine
  stage: deploy
  script:
    - apk add --no-cache ncftp
    - echo "put app/Meeting-Application-0.0.1-SNAPSHOT.jar /" | ncftp -u $FTP_USERNAME -p $FTP_PASSWORD $FTP_HOSTNAME
